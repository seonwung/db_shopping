<% // views/user/orders.ejs %>

<section class="section">
  <h1>주문 내역</h1>

  <% if (!orders || orders.length === 0) { %>
    <p>주문 내역이 없습니다.</p>
    <a href="/products">상품 보러가기</a>
  <% } else { %>
    <table class="table">
      <thead>
        <tr>
          <th>주문번호</th>
          <th>상태</th>
          <th>상품수</th>
          <th>정가 합계</th>
          <th>결제금액</th>
          <th>적립포인트</th>
          <th>주문일</th>
        </tr>
      </thead>
      <tbody>
        <% orders.forEach(o => { %>
          <tr>
            <td>#<%= o.order_id %></td>
            <td><%= o.order_status %></td>
            <td><%= o.item_count %></td>
            <td><%= o.total_original_price.toLocaleString() %>원</td>
            <td><strong><%= o.total_discounted_price.toLocaleString() %>원</strong></td>
            <td><%= o.total_earned_point.toLocaleString() %>P</td>
            <td><%= o.created_at.toISOString().slice(0, 10) %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  <% } %>
</section>
